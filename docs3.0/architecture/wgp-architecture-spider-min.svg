<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800" role="img" aria-label="Routes, Middleware, Backends - Spider Diagram">
  <defs>
    <style>
      .title { font: 700 26px 'Segoe UI', Arial, sans-serif; fill: #0f172a; }
      .subtitle { font: 600 18px 'Segoe UI', Arial, sans-serif; fill: #334155; }
      .text { font: 400 14px 'Segoe UI', Arial, sans-serif; fill: #1f2937; }
      .small { font: 400 12px 'Segoe UI', Arial, sans-serif; fill: #475569; }
      .node { fill: #ffffff; stroke: #cbd5e1; stroke-width: 2; rx: 12; }
      .chip { fill: #f8fafc; stroke: #e2e8f0; stroke-width: 1.25; rx: 8; }
      .center { fill: #f1f5f9; stroke: #cbd5e1; stroke-width: 2; rx: 14; }
      .line { stroke: #64748b; stroke-width: 3; }
      .bg { fill: #ffffff; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,5 L0,10 z" fill="#64748b" />
    </marker>
  </defs>

  <!-- Background -->
  <rect x="0" y="0" width="1200" height="800" class="bg" />

  <!-- Title -->
  <text x="600" y="60" text-anchor="middle" class="title">Platform Server Overview</text>
  <text x="600" y="86" text-anchor="middle" class="small">Focused on Routes, Middleware, and Backends</text>

  <!-- Center Node -->
  <rect x="450" y="120" width="300" height="110" class="center" />
  <text x="600" y="160" text-anchor="middle" class="subtitle">Server Layer</text>
  <text x="600" y="185" text-anchor="middle" class="text">Request Handling & Domain Rules</text>

  <!-- Spokes -->
  <line x1="600" y1="230" x2="250" y2="320" class="line" marker-end="url(#arrow)" />
  <line x1="600" y1="230" x2="600" y2="320" class="line" marker-end="url(#arrow)" />
  <line x1="600" y1="230" x2="950" y2="320" class="line" marker-end="url(#arrow)" />

  <!-- ROUTES Node -->
  <rect x="130" y="320" width="240" height="340" class="node" />
  <text x="250" y="350" text-anchor="middle" class="subtitle">Routes</text>
  <rect x="150" y="370" width="200" height="32" class="chip" />
  <text x="160" y="392" class="text">/sessions</text>
  <rect x="150" y="407" width="200" height="32" class="chip" />
  <text x="160" y="429" class="text">/sales</text>
  <rect x="150" y="444" width="200" height="32" class="chip" />
  <text x="160" y="466" class="text">/inventory</text>
  <rect x="150" y="481" width="200" height="32" class="chip" />
  <text x="160" y="503" class="text">/purchases</text>
  <rect x="150" y="518" width="200" height="32" class="chip" />
  <text x="160" y="540" class="text">/expenses</text>
  <rect x="150" y="555" width="200" height="32" class="chip" />
  <text x="160" y="577" class="text">/reports</text>
  <rect x="150" y="592" width="200" height="32" class="chip" />
  <text x="160" y="614" class="text">/users</text>
  <text x="140" y="655" class="small">Grouped by domain; return JSON responses</text>

  <!-- MIDDLEWARE Node -->
  <rect x="480" y="320" width="240" height="340" class="node" />
  <text x="600" y="350" text-anchor="middle" class="subtitle">Middleware</text>
  <rect x="500" y="370" width="200" height="32" class="chip" />
  <text x="510" y="392" class="text">Authentication</text>
  <rect x="500" y="407" width="200" height="32" class="chip" />
  <text x="510" y="429" class="text">Authorization (Roles)</text>
  <rect x="500" y="444" width="200" height="32" class="chip" />
  <text x="510" y="466" class="text">Validation (Schemas)</text>
  <rect x="500" y="481" width="200" height="32" class="chip" />
  <text x="510" y="503" class="text">Error Handling</text>
  <rect x="500" y="518" width="200" height="32" class="chip" />
  <text x="510" y="540" class="text">Request/Response Shaping</text>
  <rect x="500" y="555" width="200" height="32" class="chip" />
  <text x="510" y="577" class="text">Domain Guards (e.g., session)</text>
  <text x="490" y="655" class="small">Applied per route; order ensures safety and consistency</text>

  <!-- BACKENDS Node -->
  <rect x="830" y="320" width="240" height="340" class="node" />
  <text x="950" y="350" text-anchor="middle" class="subtitle">Backends</text>
  <rect x="850" y="370" width="200" height="32" class="chip" />
  <text x="860" y="392" class="text">Storage Interface</text>
  <rect x="850" y="407" width="200" height="32" class="chip" />
  <text x="860" y="429" class="text">Database</text>
  <rect x="850" y="444" width="200" height="32" class="chip" />
  <text x="860" y="466" class="text">Transactions</text>
  <rect x="850" y="481" width="200" height="32" class="chip" />
  <text x="860" y="503" class="text">Audit Trails</text>
  <rect x="850" y="518" width="200" height="32" class="chip" />
  <text x="860" y="540" class="text">Snapshots</text>
  <rect x="850" y="555" width="200" height="32" class="chip" />
  <text x="860" y="577" class="text">Reference Data</text>
  <text x="840" y="655" class="small">Durable persistence and integrity</text>

  <!-- Flow Notes (no stack names) -->
  <text x="600" y="710" text-anchor="middle" class="small">Flow: Routes → Middleware → Backends → Middleware → Routes</text>
  <text x="600" y="732" text-anchor="middle" class="small">Examples: Create Sale, Open/Close Session, Adjust Stock, Report Queries</text>
</svg>


